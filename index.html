<!DOCTYPE html>
<html lang="en">
<head>

<!-- ‚úÖ GOOGLE ADSENSE VERIFICATION CODE -->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3944822744642780"
crossorigin="anonymous"></script>

<meta charset="UTF-8">
<title>SSC / High Court Typing Exam Portal</title>

<style>
body {
    font-family: Arial, sans-serif;
    background: #f2f4f7;
    padding: 20px;
}
.container {
    max-width: 1500px;
    margin: auto;
    background: white;
    padding: 20px;
    border-radius: 8px;
}
.controls { text-align: center; margin-bottom: 10px; }
select, button {
    padding: 8px 12px;
    font-size: 16px;
    margin: 5px;
    cursor: pointer;
}
.split { display: flex; gap: 20px; }
.left, .right { width: 50%; }

#text {
    background: #eef2ff;
    padding: 15px;
    font-size: 18px;
    line-height: 1.7;
    white-space: pre-wrap;
    height: 420px;
    overflow-y: auto;
}

#input {
    width: 100%;
    height: 420px;
    font-size: 18px;
    padding: 12px;
}

.mistake { background: #ffb3b3; }

.stats {
    display: flex;
    justify-content: space-between;
    margin-top: 15px;
    font-size: 17px;
}

#result {
    display: none;
    margin-top: 20px;
    padding: 15px;
    background: #f0fff0;
    border-radius: 6px;
}

#history {
    margin-top: 20px;
    background: #f9f9f9;
    padding: 15px;
    border-radius: 6px;
}
</style>
</head>

<body>

<div class="container">

<h2 align="center">SSC / High Court Typing Exam Simulator</h2>

<div class="controls">
    <select id="court">
        <option value="SSC">SSC</option>
        <option value="Bombay">Bombay High Court</option>
        <option value="Delhi">Delhi High Court</option>
    </select>

    <select id="mode">
        <option value="30">30 WPM</option>
        <option value="40">40 WPM</option>
    </select>

    <button onclick="startTest()">Start</button>
    <button onclick="nextPassage()">Next</button>
    <button onclick="finishTest()">Done</button>
</div>

<div class="split">
    <div class="left">
        <h3>üìÑ Passage</h3>
        <div id="text"></div>

        <textarea id="customText" placeholder="Paste your own passage here..." style="width:100%;height:80px;"></textarea>
        <button onclick="useOwnPassage()">Use Own Passage</button>
    </div>

    <div class="right">
        <h3>‚å®Ô∏è Typing</h3>
        <textarea id="input" disabled></textarea>
    </div>
</div>

<div class="stats">
    <div>‚è± Time: <span id="time">0</span>s</div>
    <div>‚ö° WPM: <span id="wpm">0</span></div>
    <div>üéØ Accuracy: <span id="accuracy">0</span>%</div>
</div>

<div id="result"></div>

<div id="history">
    <h3>üßæ Attempt History</h3>
    <ul id="historyList"></ul>
</div>

</div>

<script>
// -------------------- PASSAGES --------------------
const passages = [
`The court observed that justice must not only be done but must also appear to have been done. The credibility of the justice delivery system depends upon fairness and transparency. Judicial discipline requires adherence to law.`
];

let activePassage = "";
let isCustomPassage = false;
let currentIndex = 0;
let timer, time, totalWords;

// -------------------- COURT RULE --------------------
function getAccuracyRule() {
    const court = document.getElementById("court").value;
    if (court === "Bombay") return 95;
    return 90;
}

// -------------------- LOAD PASSAGE --------------------
function loadPassage(text) {
    activePassage = text;
    document.getElementById("text").innerText = text;

    totalWords = text.trim().split(/\s+/).length;
    time = Math.round((totalWords / document.getElementById("mode").value) * 60);
    document.getElementById("time").innerText = time;
}

// -------------------- START TEST --------------------
function startTest() {
    clearInterval(timer);
    document.getElementById("result").style.display = "none";

    document.getElementById("input").value = "";
    document.getElementById("input").disabled = false;
    document.getElementById("input").focus();

    if (!isCustomPassage) {
        loadPassage(passages[currentIndex]);
    }

    timer = setInterval(() => {
        time--;
        document.getElementById("time").innerText = time;
        if (time <= 0) finishTest();
    }, 1000);
}

// -------------------- NEXT PASSAGE --------------------
function nextPassage() {
    isCustomPassage = false;
    currentIndex = (currentIndex + 1) % passages.length;
    startTest();
}

// -------------------- USE OWN PASSAGE --------------------
function useOwnPassage() {
    const txt = document.getElementById("customText").value.trim();
    if (!txt) return alert("Please paste your passage first.");

    isCustomPassage = true;
    clearInterval(timer);

    document.getElementById("input").value = "";
    document.getElementById("input").disabled = false;
    document.getElementById("input").focus();

    loadPassage(txt);

    timer = setInterval(() => {
        time--;
        document.getElementById("time").innerText = time;
        if (time <= 0) finishTest();
    }, 1000);
}

// -------------------- FINISH TEST --------------------
function finishTest() {
    clearInterval(timer);
    document.getElementById("input").disabled = true;

    const typed = document.getElementById("input").value;
    let correct = 0, mistakes = 0;
    let highlighted = "";

    for (let i = 0; i < typed.length; i++) {
        if (typed[i] === activePassage[i]) {
            correct++;
            highlighted += typed[i];
        } else {
            mistakes++;
            highlighted += `<span class="mistake">${typed[i] || " "}</span>`;
        }
    }

    document.getElementById("text").innerHTML = highlighted;

    const accuracy = typed.length ? Math.round((correct / typed.length) * 100) : 0;
    const wpm = Math.round((typed.length / 5) / (totalWords / document.getElementById("mode").value));
    const pass = accuracy >= getAccuracyRule();

    document.getElementById("accuracy").innerText = accuracy;
    document.getElementById("wpm").innerText = wpm;

    const resultText = pass ? "PASS ‚úÖ" : "FAIL ‚ùå";

    document.getElementById("result").innerHTML = `
        <h3>Result</h3>
        <p>Speed: ${wpm} WPM</p>
        <p>Accuracy: ${accuracy}%</p>
        <p>Mistakes: ${mistakes}</p>
        <p><b>${resultText}</b></p>
        <button onclick="window.print()">üñ® Print Result</button>
    `;
    document.getElementById("result").style.display = "block";

    saveHistory(wpm, accuracy, resultText);
}

// -------------------- HISTORY --------------------
function saveHistory(wpm, accuracy, result) {
    const history = JSON.parse(localStorage.getItem("typingHistory") || "[]");
    history.unshift({
        date: new Date().toLocaleString(),
        court: document.getElementById("court").value,
        wpm, accuracy, result
    });
    localStorage.setItem("typingHistory", JSON.stringify(history.slice(0, 10)));
    loadHistory();
}

function loadHistory() {
    const history = JSON.parse(localStorage.getItem("typingHistory") || "[]");
    const ul = document.getElementById("historyList");
    ul.innerHTML = "";
    history.forEach(h => {
        ul.innerHTML += `<li>${h.date} | ${h.court} | ${h.wpm} WPM | ${h.accuracy}% | ${h.result}</li>`;
    });
}
loadHistory();
</script>

</body>
</html>
